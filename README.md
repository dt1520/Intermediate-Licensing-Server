# Промежуточный сервер лицензирования
Прокси-сервер на основе NGINX для установки в закрытые корпоративные сети, где у пользовательских рабочих мест нет прямого доступа к сети интернет.

# Как установить?
## Установка в Docker

### 1. Скрипт для Windows (PowerShell)
Назначение:
Данный скрипт предназначен для автоматической настройки конфигурационных файлов прокси-сервера на платформе Windows с использованием Docker Compose. Скрипт запрашивает необходимые параметры сервера и настраивает файлы конфигурации (default.conf) и docker-compose.yml.

Требования:
- Операционная система: Windows с поддержкой PowerShell версии 5.0 и выше.
- Установленный Docker Desktop.

Использование:
- Скачайте скрипт и сохраните его с расширением .ps1 (например, setup.ps1).
- Откройте командную строку PowerShell от имени администратора.
- Перейдите в папку, содержащую скрипт, и выполните команду: `powershell -ExecutionPolicy Bypass -File path\to\script.ps1`
- Следуйте инструкциям, вводя требуемые данные (доменное имя и порт).
После завершения процесса конфигурационные файлы будут обновлены, и Docker запустится автоматически (при согласии пользователя).
### 2. Скрипт для Linux (.sh)
Назначение:
Linux-версия скрипта предназначена для автоматизации настроек конфигураций Nginx и Docker Compose аналогично Windows-версии, но работает на системах семейства Unix/Linux.

Требования:
- Операционная система: Linux (Ubuntu, Debian, CentOS и др.).
- Установленные пакеты: Docker (docker-compose).

Использование:
- Скачайте скрипт и сохраните его с расширением .sh (например, setup.sh).
- Сделайте файл исполняемым командой: `chmod +x setup.sh`
- Запустите скрипт командой: `./setup.sh`
- Следуйте инструкциям, вводя требуемые данные (доменное имя и порт).
По окончании процесс обновления завершится, и вам предложат перезапустить Docker Compose (по желанию).

## Установка конфигурации в действующий NGINX

Если у Вас уже установлен NGINX, то можно воспользоваться конифгурацией `conf_main\default.conf`.

```NGINX
server {
	listen       PORT;
	server_name  URL;

	location / {
		proxy_pass              https://license-api.dt1520.ru:443;
		proxy_ssl_session_reuse on;
		proxy_ssl_server_name on;
    }
}
```
- Замените значение PORT и URL в соответствии со своими требованиями.
- Вставьте конфигурацию в nginx.conf или по пути `nginx_path/conf.d/license_dt1520.conf`
- Проверьте конфигурацию и перезапустите NGINX.
